# ğŸ‘ Likes System - Visual Guide

## System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Frontend (React)                         â”‚
â”‚  [Like Button] â”€â”€â”                                          â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”˜
                                                          â”‚
                                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Backend (Express.js)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚            like.routes.js                           â”‚   â”‚
â”‚  â”‚  POST   /api/likes/:postId     â†’ likePost()         â”‚   â”‚
â”‚  â”‚  DELETE /api/likes/:postId     â†’ unlikePost()       â”‚   â”‚
â”‚  â”‚  GET    /api/likes/:postId     â†’ getPostLikes()    â”‚   â”‚
â”‚  â”‚  GET    /api/likes/:postId/count â†’ getLikeCount()  â”‚   â”‚
â”‚  â”‚  GET    /api/likes/:postId/check â†’ checkUserLike() â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚                         â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚        like.controller.js (Business Logic)          â”‚   â”‚
â”‚  â”‚  - Validate user authentication                     â”‚   â”‚
â”‚  â”‚  - Check if post exists                             â”‚   â”‚
â”‚  â”‚  - Check duplicate likes                            â”‚   â”‚
â”‚  â”‚  - Return appropriate responses                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚                         â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚      like.model.js (Database Operations)            â”‚   â”‚
â”‚  â”‚  - CREATE, READ, DELETE from likes table            â”‚   â”‚
â”‚  â”‚  - Check, count, validate                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PostgreSQL Database                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  users       â”‚  â”‚  posts       â”‚  â”‚  likes       â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚  â”‚ id (PK)      â”‚      â”‚
â”‚  â”‚ username     â”‚  â”‚ user_id (FK) â”‚  â”‚ post_id (FK) â”‚      â”‚
â”‚  â”‚ email        â”‚  â”‚ content      â”‚  â”‚ user_id (FK) â”‚      â”‚
â”‚  â”‚ password_hashâ”‚  â”‚ created_at   â”‚  â”‚ created_at   â”‚      â”‚
â”‚  â”‚ created_at   â”‚  â”‚              â”‚  â”‚ UNIQUE()     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow - Liking a Post

```
User clicks Like Button
         â”‚
         â–¼
POST /api/likes/1
(with JWT token)
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ authMiddleware                  â”‚
â”‚ Verify JWT token & get user id  â”‚
â”‚ req.user = { id: 5, ... }       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ likePost()                      â”‚
â”‚ - Extract postId from params    â”‚
â”‚ - Get userId from req.user      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check post exists               â”‚
â”‚ PostModel.findById(1)           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ Post NOT found?
         â”‚  â””â”€ Return 404 âŒ
         â”‚
         â””â”€ Post exists âœ“
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check if already liked          â”‚
â”‚ LikeModel.checkLike(1, 5)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ Already liked?
         â”‚  â””â”€ Return 409 âŒ
         â”‚
         â””â”€ Not liked yet âœ“
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create new like                 â”‚
â”‚ INSERT INTO likes               â”‚
â”‚ (post_id: 1, user_id: 5)        â”‚
â”‚                                 â”‚
â”‚ UNIQUE constraint prevents      â”‚
â”‚ duplicate entries!              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Get updated like count          â”‚
â”‚ COUNT(*) FROM likes WHERE...    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
Return 201 + { like, likeCount }  âœ“
         â”‚
         â–¼
Update UI: Show like count + button state
```

## Data Flow - Unliking a Post

```
User clicks Unlike Button
         â”‚
         â–¼
DELETE /api/likes/1
(with JWT token)
         â”‚
         â–¼
authMiddleware âœ“
         â”‚
         â–¼
Check post exists âœ“
         â”‚
         â–¼
Check if user liked it
LikeModel.checkLike(1, 5)
         â”‚
         â”œâ”€ Didn't like it?
         â”‚  â””â”€ Return 404 âŒ
         â”‚
         â””â”€ User liked it âœ“
            â”‚
            â–¼
DELETE FROM likes
WHERE post_id = 1
AND user_id = 5
            â”‚
            â–¼
Get updated like count
            â”‚
            â–¼
Return 200 âœ“
            â”‚
            â–¼
Update UI: Hide like state
```

## Database Relationships

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   USERS      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ username     â”‚               â”‚
â”‚ email        â”‚               â”‚
â”‚ password_hashâ”‚               â”‚ FOREIGN KEY
â”‚ created_at   â”‚               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
        â–²                       â”‚
        â”‚ FOREIGN KEY           â”‚
        â”‚                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   POSTS      â”‚        â”‚   LIKES      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id           â”‚â—„â”€â”€â”    â”‚ id           â”‚
â”‚ user_id      â”‚   â”‚    â”‚ post_id      â”‚â”€â”€â”
â”‚ content      â”‚   â””â”€â”€â”€â”€â”‚ user_id      â”‚â”€â”€â”˜
â”‚ created_at   â”‚        â”‚ created_at   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ UNIQUE()     â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

UNIQUE(post_id, user_id)
â†“
User can only like each post ONCE
(Prevents: John liking Post #1 twice)
```

## Error Scenarios

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Like Post Request              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ No JWT token?
         â”‚  â””â”€ 401 Unauthorized âŒ
         â”‚
         â”œâ”€ Invalid JWT?
         â”‚  â””â”€ 401 Unauthorized âŒ
         â”‚
         â”œâ”€ Post doesn't exist?
         â”‚  â””â”€ 404 Post not found âŒ
         â”‚
         â”œâ”€ Already liked this post?
         â”‚  â””â”€ 409 Conflict âŒ
         â”‚
         â”œâ”€ Database error?
         â”‚  â””â”€ 500 Server error âŒ
         â”‚
         â””â”€ All checks pass?
            â””â”€ 201 Created âœ“

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        Unlike Post Request              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€ No JWT token?
         â”‚  â””â”€ 401 Unauthorized âŒ
         â”‚
         â”œâ”€ Post doesn't exist?
         â”‚  â””â”€ 404 Post not found âŒ
         â”‚
         â”œâ”€ Didn't like this post?
         â”‚  â””â”€ 404 You didn't like this post âŒ
         â”‚
         â””â”€ All checks pass?
            â””â”€ 200 OK âœ“
```

## Key Features Summary

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LIKES SYSTEM FEATURES                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                 â”‚
â”‚ ğŸ‘ LIKE A POST                                 â”‚
â”‚    POST /api/likes/:postId                      â”‚
â”‚    Required: JWT token                          â”‚
â”‚    Returns: Like object + like count            â”‚
â”‚                                                 â”‚
â”‚ ğŸ‘ UNLIKE A POST                               â”‚
â”‚    DELETE /api/likes/:postId                    â”‚
â”‚    Required: JWT token                          â”‚
â”‚    Returns: Updated like count                  â”‚
â”‚                                                 â”‚
â”‚ ğŸ”¢ GET LIKE COUNT                              â”‚
â”‚    GET /api/likes/:postId/count                 â”‚
â”‚    Returns: Total likes for post                â”‚
â”‚                                                 â”‚
â”‚ ğŸ‘¥ GET ALL LIKES                               â”‚
â”‚    GET /api/likes/:postId                       â”‚
â”‚    Returns: List of users who liked             â”‚
â”‚                                                 â”‚
â”‚ âœ“ CHECK IF LIKED                               â”‚
â”‚    GET /api/likes/:postId/check                 â”‚
â”‚    Required: JWT token                          â”‚
â”‚    Returns: Boolean (true/false)                â”‚
â”‚                                                 â”‚
â”‚ ğŸ”’ UNIQUE CONSTRAINT                           â”‚
â”‚    One like per user per post                   â”‚
â”‚    Enforced at database level                   â”‚
â”‚                                                 â”‚
â”‚ ğŸ—‘ï¸ CASCADE DELETE                              â”‚
â”‚    Likes deleted when post/user deleted         â”‚
â”‚                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Testing Checklist

```
âœ… Can like a post                    (201 Created)
âœ… Cannot like same post twice        (409 Conflict)
âœ… Can unlike a post                  (200 OK)
âœ… Cannot unlike if not liked         (404 Not Found)
âœ… Can see like count                 (200 OK)
âœ… Can see who liked                  (200 OK)
âœ… Can check if I liked               (200 OK, true/false)
âœ… Protected routes need JWT          (401 Unauthorized)
âœ… Works with multiple users          (Database supports)
âœ… Deleting post removes likes        (Cascade delete)
âœ… Deleting user removes likes        (Cascade delete)
```

---

**Status**: âœ… COMPLETE AND TESTED
**Backend**: Running on http://localhost:5000
**Database**: PostgreSQL with likes table
**Testing**: Thunder Client collection ready
**Documentation**: Complete with examples
